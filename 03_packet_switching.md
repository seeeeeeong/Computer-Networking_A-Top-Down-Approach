# 네트워크 코어와 데이터 전송 방식

## 1. 네트워크 코어(Network Core)

네트워크 코어는 인터넷의 종단 시스템 간 데이터를 전달하는 중심 네트워크입니다.  
**패킷 스위치**(라우터, 링크 계층 스위치)와 **통신 링크**(유선, 무선)를 통해 구성됩니다.

---

## 2. 데이터 전송 방식

### 2.1 패킷 교환(Packet Switching)

- 메시지를 **작은 패킷**으로 나누어 전송
- **라우터와 링크 계층 스위치**를 통해 개별 전송
- 각 패킷은 독립적으로 목적지로 이동

#### 저장-후-전달 전송(Store-and-Forward Transmission)

- **전체 패킷을 수신한 뒤 다음 노드로 전송**
- 전송 지연 = `L/R`  
- 두 홉일 경우 총 지연 = `2L/R`

#### 예: 3개 패킷 전송 (전파 지연 무시)

| 시간       | 상황                                               |
|------------|----------------------------------------------------|
| 0초        | 출발지가 패킷 1 전송 시작                          |
| L/R 초     | 라우터가 패킷 1 수신 완료, 전송 시작               |
| 2L/R 초    | 목적지가 패킷 1 수신 완료, 패킷 2 라우터 수신 시작 |
| 4L/R 초    | 목적지가 패킷 3까지 모두 수신 완료                |

#### 다중 홉 전송 지연

- 홉 수 N일 경우: `N * (L/R)` 초

#### 큐잉 지연과 패킷 손실

- **큐잉 지연**: 출력 링크가 사용 중이면 패킷 대기
- **패킷 손실**: 출력 버퍼가 꽉 차면 도착한 패킷은 폐기(drop)

---

### 2.2 회선 교환(Circuit Switching)

- 통신 전 **전송 경로를 사전 예약**
- 연결된 동안 **지속적 자원 할당(버퍼, 대역폭 등)**

#### 특징

- 지연 예측 가능 (고정 전송률)
- 자원 낭비 발생 가능 (비활성 시에도 자원 점유)

#### 구현 방식

1. **FDM (주파수 분할 다중화)**  
   - 주파수 대역을 고정적으로 분할하여 사용자 할당

2. **TDM (시분할 다중화)**  
   - 시간 슬롯을 프레임 단위로 주기적 분할하여 사용자 할당

---

### 2.3 패킷 교환 vs 회선 교환

| 항목             | 패킷 교환                         | 회선 교환                            |
|------------------|-----------------------------------|---------------------------------------|
| 자원 할당        | 필요 시 동적 사용                  | 사전 고정 예약                        |
| 효율성           | 매우 높음                         | 낮음 (비활성 시간에도 자원 점유)     |
| 지연             | 가변적, 큐잉 지연 가능            | 고정 지연                             |
| 실시간 서비스    | 부적합할 수 있음                   | 적합                                  |
| 동시 사용자 수   | 많음                              | 제한적                                |

---

## 3. 예시 비교

### 예시 1: 10%만 트래픽을 발생시키는 사용자 10명

- 회선 교환: 10명까지만 수용
- 패킷 교환: 30명 이상도 수용 가능 (동시 전송 확률 낮음)

### 예시 2: 1명 사용자만 데이터 100만 비트 전송

- 회선 교환 (TDM): 10초
- 패킷 교환: 1초

---

## 4. 포워딩과 라우팅

### 포워딩 테이블(Forwarding Table)

1. 패킷 수신
2. IP 주소 확인
3. 테이블 탐색 → 출력 링크 결정
4. 해당 링크로 전송

### 라우팅 프로토콜(Routing Protocol)

- 포워딩 테이블 자동 설정
- 최단 경로 계산 기반 (e.g., OSPF, BGP)

---

## 5. 인터넷 구조(네트워크의 네트워크)

### ISP(Internet Service Provider)

- 종단 시스템을 인터넷에 연결
- 콘텐츠 제공자에게 인터넷 연결도 제공

---

### 구조 1: 단일 글로벌 ISP
- 모든 접속 ISP가 하나의 글로벌 ISP와 연결
- 글로벌 ISP는 각 접속 ISP에게 비용 청구

### 구조 2: 다중 글로벌 ISP
- 경쟁 생김 → 접속 ISP는 다양한 선택 가능

### 구조 3: 지역 ISP 도입 (3계층 구조)

- **접속 ISP → 지역 ISP → 1계층 ISP**
- 현실적인 구조 (1계층 ISP는 전 세계에 없음)

---

## 6. 구조 확장 요소

### PoP (Point of Presence)
- ISP 내부에 존재하는 라우터들의 모임
- 고객 ISP가 고속 링크로 PoP에 연결

### 멀티홈(Multi-homing)
- 한 ISP가 2개 이상 상위 ISP에 연결
- 장애 대응, 유연한 트래픽 경로 설정 가능

### 피어링(Peering)
- 같은 계층 ISP 간 **직접 연결 (무과금)**  
- 상위 ISP 통과 비용 줄이기 위한 전략

### IXP (Internet Exchange Point)
- 다중 ISP가 피어링할 수 있는 중립적 장소
- 독립적인 빌딩 + 스위칭 장비

---

## 7. 콘텐츠 제공자 네트워크

- 예: Google 사설 네트워크
- 전 세계 데이터센터 → 공중 인터넷 우회
- 장점:
  - 상위 ISP 비용 절감
  - 사용자 경험 품질 제어 가능

---

## 8. 최종 요약

- 인터넷은 수십만 개 접속 ISP + 약 12개 1계층 ISP로 구성
- 계층 구조: 접속 ISP → 지역 ISP → 1계층 ISP
- 콘텐츠 제공자도 자체 네트워크 구축해 하위 ISP와 직접 연결 중

> 인터넷은 **계층적, 분산적, 효율적인 패킷 교환 기반 네트워크**입니다.
